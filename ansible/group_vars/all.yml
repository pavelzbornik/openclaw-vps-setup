---
# Global variables for all hosts

# System Configuration
timezone: "UTC"
locale: "en_US.UTF-8"

# ─── Upstream-aligned variables ──────────────────────────────────────
# These match upstream openclaw-ansible defaults/main.yml.
# Only override when your deployment needs differ from upstream defaults.

openclaw_user: openclaw
openclaw_home: "/home/{{ openclaw_user }}"
openclaw_config_dir: "{{ openclaw_home }}/.openclaw"
openclaw_port: 3000

# LAN ingress (Nginx)
openclaw_lan_enabled: false
openclaw_lan_subnet: "192.168.1.0/24"
openclaw_nginx_server_name: "openclaw.lan"
openclaw_nginx_ssl_dir: "/etc/nginx/ssl"
openclaw_nginx_ssl_cert: "{{ openclaw_nginx_ssl_dir }}/openclaw.crt"
openclaw_nginx_ssl_key: "{{ openclaw_nginx_ssl_dir }}/openclaw.key"
openclaw_nginx_ssl_subject: "/CN={{ openclaw_nginx_server_name }}"
openclaw_nginx_ssl_san: "DNS:{{ openclaw_nginx_server_name }}"
openclaw_nginx_rate_limit: "10r/s"
openclaw_nginx_rate_burst: 20

# Node.js version (upstream default: 22.x)
nodejs_version: "22.x"

# Installation mode: 'release' (pnpm install -g) or 'development' (git clone)
openclaw_install_mode: "release"

# SSH keys for the openclaw user (upstream variable)
# openclaw_ssh_keys:
#   - "ssh-ed25519 AAAA... user@host"
openclaw_ssh_keys: []

# ─── Vendor base controls ───────────────────────────────────────────
# These drive the openclaw_vendor_base role which reuses upstream task files.
vendor_system_tools_enabled: true
vendor_user_enabled: true
vendor_nodejs_enabled: true
vendor_tailscale_enabled: true
vendor_docker_enabled: true
vendor_firewall_enabled: true
vendor_openclaw_install_enabled: true

# Tailscale (upstream variable — set to true to install)
tailscale_enabled: true
# Store in ansible-vault as vault_tailscale_authkey (see group_vars/vault.example.yml)
tailscale_authkey: "{{ vault_tailscale_authkey | default('', true) }}"

# CI test mode — skips systemd/Docker tasks (upstream variable)
ci_test: false

# ─── Local extensions (not in upstream) ──────────────────────────────

# SSH hardening — disables password auth and root login via sshd_config.
# Set to false only if you need password-based SSH access.
ssh_harden: true

# Extra packages not covered by upstream system-tools
extra_packages:
  - python3-pip
  - acl
  - rsync
  - python3-cryptography

# OpenClaw onboarding behavior
openclaw_app_onboard_install_daemon: false
openclaw_run_doctor: false

# 1Password Configuration
onepassword_cli_version: "latest"
onepassword_cli_deb_url: "https://downloads.1password.com/linux/debian/amd64/stable/1password-cli-amd64-latest.deb"

# OpenClaw Configuration Template Variables (for unattended deploys)
openclaw_config:
  agents:
    defaults:
      workspace: "{{ openclaw_config_dir }}/workspace"
      model:
        primary: "openrouter/anthropic/claude-sonnet-4-6"
  gateway:
    mode: "local"
    # Keep gateway loopback-only; LAN access goes through Nginx reverse proxy.
    bind: "loopback"
    port: "{{ openclaw_port }}"
    trustedProxies:
      - "127.0.0.1"
    mdns:
      enabled: false
    auth:
      mode: "token"
      token: "${OPENCLAW_GATEWAY_TOKEN}"
  channels:
    telegram:
      enabled: true
      dmPolicy: "pairing"
    discord:
      enabled: false
      dmPolicy: "pairing"

# Environment Variables for OpenClaw Service
openclaw_env_vars:
  NODE_ENV: "production"

# Git sync / migration configuration
openclaw_git_sync_enabled: true
# Scheduling precedence: when cron is enabled, keep timer disabled.
openclaw_git_timer_enabled: false
openclaw_git_cron_enabled: true
openclaw_git_cron_minute: "17"
openclaw_git_cron_hour: "*/6"
openclaw_git_migration_mode: false
openclaw_config_repo: "https://github.com/pavelzbornik/openclaw-config"
openclaw_config_repo_dest: "{{ openclaw_home }}/openclaw-config"
openclaw_git_tmp_dir: "/tmp/openclaw-config"

# Workspace file loading strategy
# Keep personal workspace files in private config repo by default.
# Local staging path is for temporary authoring in this public repo only.
openclaw_workspace_source: "private_repo"
openclaw_workspace_repo_path: "{{ openclaw_config_repo_dest }}/workspace"
openclaw_workspace_local_staging_dir: "{{ playbook_dir }}/../docs/research/local-config/workspace"
openclaw_workspace_personal_files:
  - SOUL.md
  - AGENTS.md
  - USER.md
  - IDENTITY.md
  - TOOLS.md
  - HEARTBEAT.md
  - BOOT.md
  - BOOTSTRAP.md
  - MEMORY.md

# 1Password-backed GitHub token settings
# Store in ansible-vault as vault_openclaw_op_service_account_token
openclaw_op_service_account_token: "{{ vault_openclaw_op_service_account_token | default('', true) }}"  # pragma: allowlist secret
openclaw_op_service_account_token_vault: "OpenClaw"  # pragma: allowlist secret
openclaw_op_service_account_token_item: "Service Account Auth Token"  # pragma: allowlist secret
openclaw_op_service_account_token_field: "credential"  # pragma: allowlist secret
openclaw_github_token_vault: "OpenClaw"
openclaw_github_token_item: "GitHub"
openclaw_github_token_field: "credential"
openclaw_git_use_gh_cli_auth: false

# 1Password-backed OpenRouter API key settings
openclaw_openrouter_api_key_vault: "OpenClaw"  # pragma: allowlist secret
openclaw_openrouter_api_key_item: "OpenRouter API Credentials"  # pragma: allowlist secret
openclaw_openrouter_api_key_field: "credential"  # pragma: allowlist secret

# 1Password-backed Telegram bot token settings
openclaw_telegram_bot_token_vault: "OpenClaw"
openclaw_telegram_bot_token_item: "Telegram Bot"  # pragma: allowlist secret
openclaw_telegram_bot_token_field: "credential"

# 1Password-backed Tailscale auth key settings
openclaw_tailscale_authkey_vault: "OpenClaw"  # pragma: allowlist secret
openclaw_tailscale_authkey_item: "Tailscale"  # pragma: allowlist secret
openclaw_tailscale_authkey_field: "credential"  # pragma: allowlist secret

# 1Password-backed Discord bot token settings
openclaw_discord_bot_token_vault: "OpenClaw"
openclaw_discord_bot_token_item: "discord"
openclaw_discord_bot_token_field: "credential"

# 1Password-backed OpenAI API key settings
openclaw_openai_api_key_vault: "OpenClaw"  # pragma: allowlist secret
openclaw_openai_api_key_item: "OpenAI"  # pragma: allowlist secret
openclaw_openai_api_key_field: "credential"  # pragma: allowlist secret

# 1Password-backed OpenClaw gateway token settings
openclaw_gateway_token_vault: "OpenClaw"
openclaw_gateway_token_item: "OpenClaw Gateway"
openclaw_gateway_token_field: "credential"
